(this["webpackJsonpdelivery-app-back-end"]=this["webpackJsonpdelivery-app-back-end"]||[]).push([[0],{125:function(e,t,r){"use strict";r.r(t);var a=r(0),c=r.n(a),n=r(26),s=r.n(n),i=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,141)).then((function(t){var r=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;r(e),a(e),c(e),n(e),s(e)}))},o=r(68),d=r(2),l={};var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EMAIL":return Object(d.a)(Object(d.a)({},e),{},{email:t.payload});case"SET_PASSWORD":return Object(d.a)(Object(d.a)({},e),{},{password:t.payload});default:return e}},j=Object(o.a)({loginReducer:u}),b=Object(o.b)(j),O=r(86),h=r(35),p=(r(97),r(98),r(10)),m=(r(99),r(8)),x=r.n(m),f=r(13),_=r(6),v=r(132),g=r(36),S=r(133),y=r(83),k=r(134),I=r(14),N=r.n(I),w=r(1);var E=function(e){var t=e.setStateEmail,r=e.emailTestId,a=e.title;return Object(w.jsxs)(g.a.Label,{children:[a,Object(w.jsx)(g.a.Control,{id:"email-input","data-testid":r,onChange:function(e){t(e.target.value)},type:"text"})]})},C=r(37);var T=function(e){var t=e.dispatchOnSubmit,r=e.disabled;return Object(w.jsx)(C.a,{variant:"success","data-testid":"common_login__button-login",disabled:r,onClick:t,type:"button",children:"Entrar"})};var P=function(e){var t=e.setStatePassword,r=e.passwordTestId;return Object(w.jsxs)(g.a.Label,{children:["Senha",Object(w.jsx)(g.a.Control,{"data-testid":r,onChange:function(e){t(e.target.value)},type:"password"})]})},R=r(131);var D=function(e){var t=e.hideErrorMessage;return Object(w.jsx)(R.a,{variant:"warning",hidden:t,children:"Usu\xe1rio/Senha inv\xe1lidos"})};var A=function(){var e=Object(p.g)();return Object(w.jsx)(C.a,{variant:"warning",onClick:function(){return e.push("/register")},"data-testid":"common_login__button-register",type:"button",children:"Ainda n\xe3o tenho conta"})},F="https://grupo-19-delivery-app.herokuapp.com",q=function(e){return/\S+@\S+\.\S+/.test(e)},J=function(e){return e.length>11},$=function(e){return e.length>5};var L=function(){var e=Object(a.useState)(""),t=Object(_.a)(e,2),r=t[0],c=t[1],n=Object(a.useState)(""),s=Object(_.a)(n,2),i=s[0],o=s[1],d=Object(a.useState)(!0),l=Object(_.a)(d,2),u=l[0],j=l[1],b=Object(a.useState)(!0),O=Object(_.a)(b,2),h=O[0],m=O[1],I=Object(p.g)();Object(a.useEffect)((function(){i&&r&&(q(r)&&$(i)?j(!1):j(!0))}),[r,i]),Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));if(e){var t=e.role;if("customer"===t)return I.push("/customer/products");if("seller"===t)return I.push("/seller/orders")}}));var C=function(){var e=Object(f.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("".concat(F,"/login"),{email:r,password:i});case 3:t=e.sent,a=t.data,localStorage.setItem("user",JSON.stringify(a)),redirect.to[a.role](),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),3e3,m(!1),setTimeout((function(){return m(!0)}),3e3);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(v.a,{className:"d-flex justify-content-center",children:Object(w.jsxs)(g.a,{children:[Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{children:Object(w.jsx)(k.a,{src:"images/logo.svg"})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{className:"d-flex justify-content-center",children:Object(w.jsx)("h3",{children:"Disk-Birita"})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{children:Object(w.jsx)(E,{title:"Login",setStateEmail:c,emailTestId:"common_login__input-email"})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{children:Object(w.jsx)(P,{setStatePassword:o,passwordTestId:"common_login__input-password"})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{className:"d-flex justify-content-center",children:Object(w.jsx)(T,{dispatchOnSubmit:C,disabled:u})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{className:"d-flex justify-content-center",children:Object(w.jsx)(A,{})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{className:"d-flex justify-content-center",children:Object(w.jsx)(D,{hideErrorMessage:h})})})]})})};var B=function(e){var t=e.setStateName,r=e.nameTestId;return Object(w.jsxs)(g.a.Label,{children:["Nome",Object(w.jsx)(g.a.Control,{id:"name-input","data-testid":r,onChange:function(e){t(e.target.value)},type:"text"})]})};var z=function(e){var t=e.hidden;return Object(w.jsx)(R.a,{variant:"warning",hidden:t,"data-testid":"common_register__element-invalid_register",children:"Usu\xe1rio j\xe1 existente!"})};var M=function(){var e=Object(p.g)(),t=Object(a.useState)(),r=Object(_.a)(t,2),c=r[0],n=r[1],s=Object(a.useState)(),i=Object(_.a)(s,2),o=i[0],d=i[1],l=Object(a.useState)(),u=Object(_.a)(l,2),j=u[0],b=u[1],O=Object(a.useState)(!0),h=Object(_.a)(O,2),m=h[0],I=h[1],T=Object(a.useState)(!0),R=Object(_.a)(T,2),D=R[0],A=R[1];Object(a.useEffect)((function(){j&&o&&c&&(q(o)&&$(j)&&J(c)?I(!1):I(!0))}),[o,c,j]);var L=function(){var t=Object(f.a)(x.a.mark((function t(){var r,a,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.post("".concat(F,"/register"),{name:c,email:o,password:j});case 3:r=t.sent,a=r.data,n={name:a.name,email:a.email,role:a.role,token:a.token},localStorage.setItem("user",JSON.stringify(n)),e.push("/customer/products"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),3e3,A(!1),setTimeout((function(){return A(!0)}),3e3);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return Object(w.jsx)(v.a,{className:"d-flex justify-content-center",children:Object(w.jsxs)(g.a,{className:"align-self-center",children:[Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{children:Object(w.jsx)(k.a,{src:"images/logo.svg",className:".login-logo",fluid:!0})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{className:"d-flex justify-content-center",children:Object(w.jsx)("h3",{children:"Disk-Birita"})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{children:Object(w.jsx)(B,{nameTestId:"common_register__input-name",setStateName:n})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{children:Object(w.jsx)(E,{emailTestId:"common_register__input-email",setStateEmail:d,title:"Email"})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{children:Object(w.jsx)(P,{passwordTestId:"common_register__input-password",setStatePassword:b})})}),Object(w.jsx)(S.a,{children:Object(w.jsx)(y.a,{className:"d-flex justify-content-center",children:Object(w.jsx)(C.a,{variant:"success","data-testid":"common_register__button-register",disabled:m,onClick:L,type:"button",children:"Cadastrar"})})}),Object(w.jsx)(S.a,{className:"justify-content-md-center",children:Object(w.jsx)(y.a,{children:Object(w.jsx)(z,{hidden:D})})})]})})},V=r(138),U=r(139);var G=function(){var e=JSON.parse(localStorage.getItem("user")).name,t=Object(p.g)(),r=t.location.pathname.includes("/seller");return Object(w.jsx)(V.a,{bg:"light",expand:"md",children:Object(w.jsxs)(v.a,{children:[Object(w.jsx)(V.a.Brand,{children:Object(w.jsx)(k.a,{src:"/images/logo.svg",width:"50",height:"40",alt:"Disk Birita logo"})}),Object(w.jsx)(V.a.Toggle,{"aria-controls":"navbarScroll"}),Object(w.jsxs)(V.a.Collapse,{id:"navbarScroll",children:[Object(w.jsxs)(U.a,{className:"me-auto my-2 my-lg-0",navbarScroll:!0,children:[Object(w.jsx)(U.a.Link,{href:r?"/seller/orders":"/customer/products","data-testid":"customer_products__element-navbar-link-".concat(r?"orders":"products"),children:r?"ORDERS":"PRODUTOS"}),!r&&Object(w.jsx)(U.a.Link,{href:"/customer/orders","data-testid":"customer_products__element-navbar-link-orders",children:"PEDIDOS"})]}),Object(w.jsx)(V.a.Text,{"data-testid":"customer_products__element-navbar-user-full-name",href:"/customer/orders",children:e}),Object(w.jsx)(C.a,{onClick:function(){localStorage.clear(),t.push("/")},"data-testid":"customer_products__element-navbar-link-logout",type:"button",children:"Sair"})]})]})})},Q=r(30),W=r(140),Z=r(135);var H=function(e){var t=e.product,r=e.product,a=r.id,c=r.name,n=r.price,s=r.urlImage,i=r.quantity,o=e.setCart,d=e.cart;return Object(w.jsxs)(W.a,{children:[Object(w.jsx)(W.a.Img,{"data-testid":"customer_products__img-card-bg-image-".concat(a),variant:"top",src:s,style:{heigth:"100px"}}),Object(w.jsx)(W.a.Title,{"data-testid":"customer_products__element-card-title-".concat(a),children:c}),Object(w.jsxs)(W.a.Text,{children:["R$",Object(w.jsx)("span",{"data-testid":"customer_products__element-card-price-".concat(a),children:n.toString().split(".").join(",")})]}),Object(w.jsxs)(Z.a,{children:[Object(w.jsx)(C.a,{id:a,"data-testid":"customer_products__button-card-rm-item-".concat(a),variant:"success",onClick:function(e){return function(e){var r="input-".concat(e),i=document.getElementById(r);/^[0-9\b]+$/.test(i.value)&&parseInt(i.value,10)>0?i.value=parseInt(i.value,10)-1:i.value=0;var l=d.indexOf(t),u=Object(Q.a)(d);u[l]={id:a,price:n,quantity:parseInt(i.value,10),name:c,urlImage:s},o(u)}(e.target.id)},children:"-"}),Object(w.jsx)(g.a.Control,{as:"input",size:"sm",min:"0",max:"99",id:"input-".concat(a),"data-testid":"customer_products__input-card-quantity-".concat(a),onChange:function(e){!function(e,t){var r=t,i=e.split("-")[1]-1;t.isNaN&&(r=0);var l=Object(Q.a)(d);l[i]={id:a,price:n,quantity:parseInt(r,10),name:c,urlImage:s},o(l)}(e.target.id,e.target.value)},type:"integer",placeholder:"0",defaultValue:i}),Object(w.jsx)(C.a,{id:a,"data-testid":"customer_products__button-card-add-item-".concat(a),onClick:function(e){return function(e){var r="input-".concat(e),i=document.getElementById(r);/^[0-9\b]+$/.test(i.value)?i.value=parseInt(i.value,10)+1:i.value=1;var l=d.indexOf(t),u=Object(Q.a)(d);u[l]={id:a,price:n,quantity:parseInt(i.value,10),name:c,urlImage:s},o(u)}(e.target.id)},variant:"success",children:"+"})]})]})};var K=function(e){var t=e.cartTotal,r=Object(p.g)();return Object(w.jsxs)("div",{className:"floating-total","data-testid":"customer_products__checkout-bottom-value",disabled:t<=0,children:["Ver Carrinho: R$",Object(w.jsx)("button",{type:"button","data-testid":"customer_products__button-cart",disabled:t<=0,onClick:function(){return r.push("/customer/checkout")},children:" ".concat(t.toFixed(2).toString().split(".").join(","))})]})};var X=function(){var e=Object(a.useState)(),t=Object(_.a)(e,2),r=t[0],c=t[1],n=Object(a.useState)(0),s=Object(_.a)(n,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){(function(){var e=Object(f.a)(x.a.mark((function e(){var t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(F,"/products"));case 2:t=e.sent,r=t.data.map((function(e){return e.quantity=0,e})),c(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){var e=0;localStorage.setItem("cart",JSON.stringify(r)),r&&r.forEach((function(t){e+=t.price*t.quantity})),o(e)}),[r]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(G,{}),Object(w.jsx)(v.a,{children:Object(w.jsx)(S.a,{xs:1,md:3,sm:2,className:"g-4",children:r&&r.map((function(e,t){return Object(w.jsx)(H,{product:e,setCart:c,cart:r},t)}))})}),Object(w.jsx)(K,{cartTotal:i})]})},Y=r(3),ee=["component"],te=function(e){var t=e.component,r=Object(Y.a)(e,ee),a=localStorage.getItem("user");return Object(w.jsx)(p.b,Object(d.a)(Object(d.a)({},r),{},{render:function(e){return a?Object(w.jsx)(t,Object(d.a)({},e)):Object(w.jsx)(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},re=te;te.defaultProps={location:{}};var ae=function(e){var t=e.product,r=e.product,a=r.id,c=r.name,n=r.price,s=r.quantity,i=e.setCart,o=e.cart,d=o.indexOf(t);return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{"data-testid":"customer_checkout__element-order-table-item-number-".concat(d),children:d+1}),Object(w.jsx)("div",{"data-testid":"customer_checkout__element-order-table-name-".concat(d),children:c}),Object(w.jsx)("div",{"data-testid":"customer_checkout__element-order-table-quantity-".concat(d),children:s}),Object(w.jsxs)("div",{children:["R$",Object(w.jsx)("div",{"data-testid":"customer_checkout__element-order-table-unit-price-".concat(d),children:n.toString().split(".").join(",")})]}),Object(w.jsxs)("div",{children:["R$",Object(w.jsx)("span",{"data-testid":"customer_checkout__element-order-table-sub-total-".concat(d),children:(n*s).toFixed(2).toString().split(".").join(",")})]}),Object(w.jsx)(C.a,{id:a,"data-testid":"customer_checkout__element-order-table-remove-".concat(d),onClick:function(){return function(e){var t=Object(Q.a)(o);return t.splice(e,1),i(t)}(d)},variant:"success",children:"Remover"})]})};var ce=function(e){var t=e.cartTotal,r=Object(p.g)();return Object(w.jsxs)("div",{className:"floating-total","data-testid":"customer_products__checkout-bottom-value",disabled:t<=0,children:["Total: R$",Object(w.jsx)("button",{type:"button","data-testid":"customer_checkout__element-order-total-price",disabled:t<=0,onClick:function(){return r.push("/customer/checkout")},children:" ".concat(t.toFixed(2).toString().split(".").join(","))})]})},ne=r(137);var se=function(e){var t=e.finishSale,r=e.setDeliveryAddress,a=e.setDeliveryNumber,c=e.setSellerId,n=e.sellers;return Object(w.jsxs)(v.a,{children:[Object(w.jsxs)("div",{className:"d-flex",children:[Object(w.jsxs)(ne.a,{children:[Object(w.jsx)("div",{children:Object(w.jsx)("span",{children:"P. Vendedora Respons\xe1vel:"})}),Object(w.jsxs)("select",{onChange:function(e){return c(e.target.value)},name:"select","data-testid":"customer_checkout__select-seller",children:[Object(w.jsx)("option",{disabled:!0,selected:!0,value:!0,children:" -- Selecione -- "}),n.map((function(e,t){var r=e.id,a=e.name;return Object(w.jsx)("option",{value:r,defaultValue:!0,children:a},t)}))]})]}),Object(w.jsxs)(g.a.Label,{children:["Endere\xe7o",Object(w.jsx)(g.a.Control,{placeholder:"Travessa Terceira da Castanheira, Bairro Murici",type:"text","data-testid":"customer_checkout__input-address",onChange:function(e){r(e.target.value)}})]}),Object(w.jsxs)(g.a.Label,{children:["N\xfamero",Object(w.jsx)(g.a.Control,{placeholder:"198","data-testid":"customer_checkout__input-addressNumber",type:"number",onChange:function(e){a(e.target.value)}})]})]}),Object(w.jsx)("button",{type:"button","data-testid":"customer_checkout__button-submit-order",onClick:t,children:"FINALIZAR PEDIDO"})]})};var ie=function(){var e=Object(p.g)(),t=Object(a.useState)(),r=Object(_.a)(t,2),c=r[0],n=r[1],s=Object(a.useState)(0),i=Object(_.a)(s,2),o=i[0],d=i[1],l=Object(a.useState)(""),u=Object(_.a)(l,2),j=u[0],b=u[1],O=Object(a.useState)(""),h=Object(_.a)(O,2),m=h[0],v=h[1],g=Object(a.useState)(),S=Object(_.a)(g,2),y=S[0],k=S[1],I=Object(a.useState)([]),E=Object(_.a)(I,2),C=E[0],T=E[1];Object(a.useEffect)((function(){(function(){var e=Object(f.a)(x.a.mark((function e(){var t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.parse(localStorage.getItem("cart")),r=t.filter((function(e){return e.quantity>0})),n(r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(f.a)(x.a.mark((function e(){var t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(F,"/seller/all"));case 2:t=e.sent,r=t.data,T(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[T]),Object(a.useEffect)((function(){var e=0;localStorage.setItem("cart",JSON.stringify(c)),c&&c.forEach((function(t){e+=t.price*t.quantity})),d(e)}),[c]);var P=function(){var t=Object(f.a)(x.a.mark((function t(){var r,a,n,s,i,d;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=JSON.parse(localStorage.getItem("user")),a=r.token,n={headers:{authorization:a}},s={totalPrice:o,products:c,deliveryAddress:j,deliveryNumber:m,sellerId:y},t.next=6,N.a.post("".concat(F,"/customer/checkout"),s,n);case 6:i=t.sent,d=i.data.saleId,e.push("/customer/orders/".concat(d)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(G,{}),Object(w.jsxs)("div",{children:[c&&c.map((function(e){return Object(w.jsx)(ae,{product:e,setCart:n,cart:c},e.key)})),Object(w.jsx)(ce,{cartTotal:o})]}),Object(w.jsx)("div",{children:"Detalhes e Endere\xe7o para Entrega"}),Object(w.jsx)(se,{setDeliveryNumber:v,setDeliveryAddress:b,finishSale:P,setSellerId:k,sellers:C})]})},oe=r(136);var de=function(e){var t=e.order;return Object(w.jsxs)(oe.a,{striped:!0,bordered:!0,hover:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Item"}),Object(w.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(w.jsx)("th",{children:"Quantidade"}),Object(w.jsx)("th",{children:"Valor unit\xe1rio"}),Object(w.jsx)("th",{children:"Sub-total"})]})}),Object(w.jsx)("tbody",{children:t.map((function(e){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{"data-testid":"customer_order_details__element-order-table-item-number-".concat(e.id),children:e.id}),Object(w.jsx)("td",{"data-testid":"customer_order_details__element-order-table-name-".concat(e.id),children:e.name}),Object(w.jsx)("td",{"data-testid":"customer_order_details__element-order-table-quantity-".concat(e.id),children:e.SalesProduct.quantity}),Object(w.jsxs)("td",{"data-testid":"customer_order_details__element-order-table-sub-total-".concat(e.id),children:["R$",e.price.split(".").join(",")]}),Object(w.jsxs)("td",{children:["R$",(parseFloat(e.price)*e.SalesProduct.quantity).toFixed(2).split(".").join(",")]})]},e.id)}))})]})};var le=function(){var e=Object(a.useState)(!1),t=Object(_.a)(e,2),r=t[0],c=t[1],n=Object(a.useState)("Pendente"),s=Object(_.a)(n,2),i=s[0],o=s[1],d=Object(a.useState)(),l=Object(_.a)(d,2),u=l[0],j=l[1],b=Object(p.g)();Object(a.useEffect)((function(){var e=b.location.pathname.split("/"),t=e[e.length-1],r={headers:{authorization:JSON.parse(localStorage.getItem("user")).token}};(function(){var e=Object(f.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(F,"/customer/orders/").concat(t),r);case 2:a=e.sent,j(a.data.order),o(a.data.order.status);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[b.location.pathname]);var O=function(){var e=Object(f.a)(x.a.mark((function e(t){var a,n,s,i,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=b.location.pathname.split("/"),n=a[a.length-1],s=JSON.parse(localStorage.getItem("user")),i=s.token,d={headers:{authorization:i}},N.a.post("".concat(F,"/seller/orders/").concat(n),{orderStatus:t},d),c(!r),o(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(u){var h=u.saleDate.split("-"),m="".concat(h[2][0]).concat(h[2][1]),v="".concat(h[1][0]).concat(h[1][1]),g="".concat(h[0].slice(0,4)),S="".concat(m,"/").concat(v,"/").concat(g);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(G,{}),Object(w.jsx)("p",{children:"Detalhe do pedido"}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("span",{"data-testid":"customer_order_details__element-order-details-label-order-id",children:["Pedido",u.id]}),Object(w.jsxs)("span",{"data-testid":"customer_order_details__element-order-details-label-seller-name",children:["P. Vendedora:",u.seller.name]}),Object(w.jsx)("span",{"data-testid":"customer_order_details__element-order-details-label-order-date",children:S}),Object(w.jsx)("span",{"data-testid":"customer_order_details__element-order-details-label-delivery-status",children:i}),Object(w.jsx)("button",{"data-testid":"customer_order_details__button-delivery-check",type:"button",disabled:"Em Tr\xe2nsito"!==i,onClick:function(){return O("Entregue")},children:"MARCAR COMO ENTREGUE"}),Object(w.jsx)(de,{order:u.products}),Object(w.jsx)("span",{children:"Total: R$"}),Object(w.jsx)("span",{"data-testid":"customer_order_details__element-order-total-price",children:u.totalPrice.split(".").join(",")})]})]})}return Object(w.jsx)("p",{children:"Carregando"})};var ue=function(e){var t=e.order;return Object(w.jsxs)(oe.a,{striped:!0,bordered:!0,hover:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Item"}),Object(w.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(w.jsx)("th",{children:"Quantidade"}),Object(w.jsx)("th",{children:"Valor unit\xe1rio"}),Object(w.jsx)("th",{children:"Sub-total"})]})}),Object(w.jsx)("tbody",{children:t.map((function(e){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{"data-testid":"seller_order_details__element-order-table-item-number-".concat(e.id),children:e.id}),Object(w.jsx)("td",{"data-testid":"seller_order_details__element-order-table-name--".concat(e.id),children:e.name}),Object(w.jsx)("td",{"data-testid":"seller_order_details__element-order-table-quantity-".concat(e.id),children:e.SalesProduct.quantity}),Object(w.jsxs)("td",{"data-testid":"seller_order_details__element-order-table-unit-price-".concat(e.id),children:["R$",e.price.split(".").join(",")]}),Object(w.jsxs)("td",{"data-testid":"seller_order_details__element-order-table-sub-total".concat(e),children:["R$",(parseFloat(e.price)*e.SalesProduct.quantity).toFixed(2).split(".").join(",")]})]},e.id)}))})]})};var je=function(){var e=Object(a.useState)(),t=Object(_.a)(e,2),r=t[0],c=t[1],n=Object(a.useState)(!1),s=Object(_.a)(n,2),i=s[0],o=s[1],d=Object(a.useState)("Pendente"),l=Object(_.a)(d,2),u=l[0],j=l[1],b=Object(p.g)();Object(a.useEffect)((function(){var e=b.location.pathname.split("/"),t=e[e.length-1],r={headers:{authorization:JSON.parse(localStorage.getItem("user")).token}};(function(){var e=Object(f.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(F,"/seller/orders/").concat(t),r);case 2:a=e.sent,c(a.data.order),j(a.data.order.status);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[b.location.pathname]);var O=function(){var e=Object(f.a)(x.a.mark((function e(t){var r,a,c,n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.location.pathname.split("/"),a=r[r.length-1],c=JSON.parse(localStorage.getItem("user")),n=c.token,s={headers:{authorization:n}},e.next=6,N.a.post("".concat(F,"/seller/orders/").concat(a),{orderStatus:t},s);case 6:o(!i),j(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(r){var h=r.saleDate.split("-"),m="".concat(h[2][0]).concat(h[2][1]),v="".concat(h[1][0]).concat(h[1][1]),g="".concat(h[0].slice(0,4)),S="".concat(m,"/").concat(v,"/").concat(g);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(G,{}),Object(w.jsx)("p",{children:"Detalhe do pedido"}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("span",{"data-testid":"seller_order_details__element-order-details-label-order-id",children:["Pedido",r.id]}),Object(w.jsx)("span",{"data-testid":"seller_order_details__element-order-details-label-order-date",children:S}),Object(w.jsx)("span",{"data-testid":"seller_order_details__element-order-details-label-delivery-status",children:u}),Object(w.jsx)("button",{"data-testid":"seller_order_details__button-preparing-check",type:"button",disabled:"Pendente"!==u,onClick:function(){return O("Preparando")},children:"PREPARAR PEDIDO"}),Object(w.jsx)("button",{"data-testid":"seller_order_details__button-dispatch-check",type:"button",disabled:"Preparando"!==u,onClick:function(){return O("Em Tr\xe2nsito")},children:"SAIU PARA ENTREGA"}),Object(w.jsx)(ue,{order:r.products}),Object(w.jsx)("span",{children:"Total: R$"}),Object(w.jsx)("span",{"data-testid":"seller_order_details__element-order-total-price",children:r.totalPrice.split(".").join(",")})]})]})}return Object(w.jsx)("p",{children:"Carregando"})};var be=function(e){var t=e.id,r=e.status,a=e.date,c=e.totalPrice,n=a.split("-"),s="".concat(n[2][0]).concat(n[2][1]),i="".concat(n[1][0]).concat(n[1][1]),o="".concat(n[0][0]).concat(n[0][1]).concat(n[0][2]).concat(n[0][3]),d="".concat(s,"/").concat(i,"/").concat(o);return Object(w.jsxs)("a",{href:"/customer/orders/".concat(t),children:[Object(w.jsxs)(W.a.Title,{"data-testid":"customer_orders__element-order-id-".concat(t),children:["Pedido",t]}),Object(w.jsx)(W.a.Text,{children:Object(w.jsx)("span",{"data-testid":"customer_orders__element-delivery-status-".concat(t),children:r})}),Object(w.jsx)(W.a.Text,{children:Object(w.jsx)("span",{"data-testid":"customer_orders__element-order-date-".concat(t),children:d})}),Object(w.jsxs)(W.a.Text,{children:["R$",Object(w.jsx)("span",{"data-testid":"customer_orders__element-card-price-".concat(t),children:c.toString().split(".").join(",")})]})]})};var Oe=function(){var e=Object(a.useState)(),t=Object(_.a)(e,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){var e={headers:{authorization:JSON.parse(localStorage.getItem("user")).token}};(function(){var t=Object(f.a)(x.a.mark((function t(){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(F,"/customer/orders"),e);case 2:r=t.sent,c(r.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(G,{}),Object(w.jsx)(v.a,{fluid:!0,children:Object(w.jsx)(S.a,{children:r&&r.map((function(e){return Object(w.jsx)(y.a,{children:Object(w.jsx)(be,{id:e.id,status:e.status,date:e.saleDate,totalPrice:e.totalPrice})},e.id)}))})})]})};var he=function(e){var t=e.id,r=e.status,a=e.date,c=e.totalPrice,n=e.deliveryAddress,s=e.deliveryNumber,i=a.split("-"),o="".concat(i[2][0]).concat(i[2][1]),d="".concat(i[1][0]).concat(i[1][1]),l="".concat(i[0][0]).concat(i[0][1]).concat(i[0][2]).concat(i[0][3]),u="".concat(o,"/").concat(d,"/").concat(l);return Object(w.jsxs)("a",{href:"/seller/orders/".concat(t),children:[Object(w.jsxs)(W.a.Title,{"data-testid":"seller_orders__element-order-id-".concat(t),children:["Pedido",t]}),Object(w.jsx)(W.a.Text,{children:Object(w.jsx)("span",{"data-testid":"seller_orders__element-delivery-status-".concat(t),children:r})}),Object(w.jsx)(W.a.Text,{children:Object(w.jsx)("span",{"data-testid":"seller_orders__element-order-date-".concat(t),children:u})}),Object(w.jsxs)(W.a.Text,{children:["R$",Object(w.jsx)("span",{"data-testid":"seller_orders__element-card-price-".concat(t),children:c.toString().split(".").join(",")})]}),Object(w.jsx)(W.a.Text,{children:Object(w.jsx)("span",{"data-testid":"seller_orders__element-card-address-".concat(t),children:"".concat(n,",").concat(s)})})]})};var pe=function(){var e=Object(a.useState)(),t=Object(_.a)(e,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){var e={headers:{authorization:JSON.parse(localStorage.getItem("user")).token}};(function(){var t=Object(f.a)(x.a.mark((function t(){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(F,"/seller/orders"),e);case 2:r=t.sent,c(r.data.sales);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(G,{}),Object(w.jsx)(v.a,{fluid:!0,children:Object(w.jsx)(S.a,{children:r&&r.map((function(e){return Object(w.jsx)(y.a,{children:Object(w.jsx)(he,{id:e.id,status:e.status,date:e.saleDate,totalPrice:e.totalPrice,deliveryAddress:e.deliveryAddress,deliveryNumber:e.deliveryNumber})},e.id)}))})})]})};var me=function(){return Object(w.jsxs)(p.d,{children:[Object(w.jsx)(p.b,{path:"/login",component:L}),Object(w.jsx)(p.b,{path:"/register",component:M}),Object(w.jsx)(re,{path:"/customer/products",component:X}),Object(w.jsx)(re,{path:"/customer/checkout",component:ie}),Object(w.jsx)(re,{path:"/customer/orders/:id",component:le}),Object(w.jsx)(re,{path:"/customer/orders",component:Oe}),Object(w.jsx)(re,{path:"/seller/orders/:id",component:je}),Object(w.jsx)(re,{path:"/seller/orders",component:pe}),Object(w.jsx)(p.a,{strict:!0,from:"/",to:"/login"})]})};s.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(h.a,{children:Object(w.jsx)(O.a,{store:b,children:Object(w.jsx)(me,{})})})}),document.getElementById("root")),i()},97:function(e,t,r){},99:function(e,t,r){}},[[125,1,2]]]);
//# sourceMappingURL=main.b2eebe59.chunk.js.map